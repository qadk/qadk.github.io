---
title: "語義化函數命名"
date: 2015-12-26
categories: ["Clean Code"]
tags: ["Clean Code"]
---

正確命名這件事是個艱難的編碼任務。然而，這只是因為我們給予這些任務的考慮經常不足，這篇文章主要在說怎麼為函數正確的命名。

<!--more-->

雖然我們專注於命名，但其實文件化和命名可以協助彼此更好。一旦我們習慣為每個函數寫作文檔說明這個函數到底在幹嘛，這會幫助我們正確命名自己的函數。如果文件很棒，那麼通常命名只需要從文檔中選擇正確的字就好。我們可以使用這個技巧檢驗函數名稱和文件是否意見一致，如果他們在表達不同事情的話，一定有其中一方是錯誤的。

來建立我們最初也最重要的規則：所有的函數都是在做某件事，所以它們的名字需要從**動詞**開始。接下來我們可以看如何選擇最好的動詞來傳達我們函數到底在幹嘛。

## 減少 Get

我們編寫的許多函數大都會回傳一個值，選擇 `get` 做為大多數函數的動詞是一個常見的錯誤。`Get` 使用在去訪問或執行簡單的操作是很好的，像是取出一個指針，但沒有傳達足夠多的資訊跟調用者說明這個方法的複雜性。

思考一個用來將資料從資料庫中取回的函數。它需要連結遠端的電腦，從眾多來源中搜尋資料，執行整合和排序。我們可以稱呼這個函數為 `getData()` 但這個動詞和其他單純從記憶體中取回一個值的函數沒有任何區別。如果叫它 `fetchData()` 我們的意思是為了取回資料需要做更多的事情。

作為一項規則， `get` 只能用在常量時間複雜度的函數上；其他複雜度要選擇能更好描述的動詞。例如，如果我們寫了一個用來計算數學算式並回傳的函數，最好的動詞就是 `calculate` 。

試試描述以下的程式碼讓它符合它所做的。

```php
function getItem($match) {
    foreach ($this->items as $item) {
        if ($item === $match) {
            return $item;
        }
    }
}
```

我們可以說這個函數之所以出現是為了搜尋集合以找到一個符合指定參數的值。從這段描述中我們可以直接取出一個比 `get` 更好的動詞；在這個例子中不管是 `search` 或是 `find` 都會比 `get` 更能傳達它的複雜度給調用者，所以我們應該重新命名這個函數為 `findItem` 。

## 不要使用 *do*

由於每個方法都是在*做*某件事，選擇 `do` 來當動詞並沒有傳達關於這個方法在到底在做什麼的任何額外資訊。 `Do` 再加上 `handle` 、 `perform` 、 `return` 、 `compute` 和其他同義詞是幾種常見且應該避免的動詞。

某些動詞，像是 `call` 、 `execute` 、 `run` 、 `prepare`，則在可用的邊緣。使用它們不總是錯誤的，但如果我們發現自己想使用它們，先暫停一下，考慮看看是否有更好描述這個方法在做什麼的動詞。

## 回傳類型為布林值

當方法回傳 `true` 或 `false` 時以 `is` 或 `are` 作為開頭（取決於是單數或複數）。這些方法提出問題像： `Button::isEnabled()` 、 `File::isLocked()` 或是 `Inputs::areValid()` 。

在 Ruby 中發現另一種慣例是通過附加一個問號而非前綴動詞來定義問題。以前面例子來說那些方法將分別被命名為 `enabled?` 、`locked?` 或 `valid?` 。如果你使用語言的語法支持，你不妨使用這種約定。

## 目標推理

函數( funcion )和方法( method )之間有細微的差別。方法指的是一個函數運行在某個對象底下，如我們定義的類別( class )。我們說，該方法綁定在某個類或對象，因為當它執行時可以存取該對象中的數據。

有時僅需要一個動詞就足以推斷綁定於某個對象的方法在做什麼。例如，一個方法用來儲存訊息我們通常會叫他 `saveMessage` 。這個方法包括一個指定操作的目標 ( message )。然而，當這個目標和此方法被綁定的對象名稱一樣時，我們可以省略它，只需要將我們的方法命名為 `save` 。這個主題將從綁定的對象上推斷出來，而且更加直觀像是 `$message->save()` 而非 `$message->saveMessage()` 。

## 不要描述參數

一個方法的簽名包括方法名稱和需要的參數。當使用一個方法時，我們需要同時獲得這兩者，所以這只是在名稱上重複描述所需要的參數。當一個方法簽名為 `findUserByUserIdAndToken($userId, $token)` 時，他可以被簡化為 `findUser($userId, $token)` 。

在某些支持方法重載的語言，如 C++ ， C# 和 Java 裡，我們能夠始終遵循這一規則。然而某些最流行的腳本語言如 JavaScrip ， PHP ， Python 和 Ruby 並不支持方法重載，這代表我們不能擁用兩個同名但需要不同參數的方法。在這種情況下，打破這個規則用來區分使用不同參數的方法可能是必要的。

## 總結

我們了解到一些語義規則，可以應用到我們的函數和方法，以幫助決定正確的名稱。最重要的是，所有的方法名稱必需以動詞開始。如果我們這樣描述我們的方法做些什麼，並注意不要使用一些應該避免的單字，我們應該能夠選擇最合適的動詞來開始我們的方法名。

有些人認為文件比程式碼更重要。如果程式碼錯了但沒有文件時，會因為我們不知道它想要做些什麼或為什麼這麼做而導致很難修復。當一個系統明確地描述時，我們便可以做正確的決策去修復它。正確命名我們的方法只是擁有好文件的第一步，更進一步我們應該考慮文件化每一個類和方法，反過來說，這也幫助我們命名我們的方法。

## 原文網址

[Semantic method naming](http://codelegance.com/semantic-method-naming/)
