<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Yuhui's Notes]]></title>
  <subtitle><![CDATA[Nerver Stop Learning.]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://yuhui.im/"/>
  <updated>2015-11-23T04:24:19.000Z</updated>
  <id>http://yuhui.im/</id>
  
  <author>
    <name><![CDATA[Yuhui]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Laravel 5.1 中使用 Gulp + Elixir 進行自動化測試]]></title>
    <link href="http://yuhui.im/2015/10/01/Laravel-5-1-%E4%B8%AD%E4%BD%BF%E7%94%A8-Gulp-Elixir-%E9%80%B2%E8%A1%8C%E8%87%AA%E5%8B%95%E5%8C%96%E6%B8%AC%E8%A9%A6/"/>
    <id>http://yuhui.im/2015/10/01/Laravel-5-1-中使用-Gulp-Elixir-進行自動化測試/</id>
    <published>2015-10-01T13:39:16.000Z</published>
    <updated>2015-11-23T04:24:19.000Z</updated>
    <content type="html"><![CDATA[<p>每次修改程式都要自己跑測試實在有點麻煩，所以把監聽檔案改變並且執行測試這件事交給 Gulp 吧。</p>
 <a id="more"></a>
<h2 id="環境建立">環境建立</h2><p>需要安裝</p>
<ul>
<li>phpunit 相關依賴套件 </li>
<li>node </li>
<li>npm</li>
<li>global 的 gulp 套件</li>
</ul>
<blockquote>
<p>以下安裝方式是以 Ubuntu 為例</p>
</blockquote>
<h3 id="PHP_Unit_相關依賴套件安裝">PHP Unit 相關依賴套件安裝</h3><p>移到專案資料夾中，確定 vendor 中已掛入 <code>phpunit</code> ，並且可以順利執行<code>./vendor/bin/phpunit</code>，有缺少依賴套件的話就在這步驟補上吧。</p>
<h3 id="安裝_Nodejs">安裝 Nodejs</h3><blockquote>
<p>由於 Ubuntu 的 node 已被佔用，如果要在 Ubuntu 上安裝需要另加 nodejs 的 ppa 解決。</p>
</blockquote>
<figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo<span class="instruction"> add-apt-repository </span>ppa:chris-lea/node.js</span><br><span class="line">sudo apt-get install nodejs</span><br><span class="line"></span><br><span class="line">// 測試安裝成功</span><br><span class="line">nodejs -v //<span class="instruction"> or </span>node -v </span><br><span class="line"><span class="variable">v0</span>.10.37</span><br></pre></td></tr></table></figure>
<h3 id="安裝_npm_(_nodejs_的套件管理)">安裝 npm ( nodejs 的套件管理)</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install npm</span><br><span class="line"></span><br><span class="line"><span class="comment">// 測試安裝成功</span></span><br><span class="line">npm -v </span><br><span class="line"><span class="number">1.4</span><span class="number">.28</span></span><br></pre></td></tr></table></figure>
<h3 id="安裝_global_環境的_Gulp">安裝 global 環境的 Gulp</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g gulp </span><br><span class="line"></span><br><span class="line"><span class="comment">// 測試安裝成功</span></span><br><span class="line">gulp</span><br><span class="line">[<span class="number">12</span>:<span class="number">02</span>:<span class="number">53</span>] Local gulp not found in ~/git</span><br><span class="line">[<span class="number">12</span>:<span class="number">02</span>:<span class="number">53</span>] Try running: npm install gulp</span><br></pre></td></tr></table></figure>
<h2 id="Laravel_5-1_專案相關套件安裝">Laravel 5.1 專案相關套件安裝</h2><p>移動到 Laravel 5.1 的專案資料夾安裝 gulp 和 laravel-elxir</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> project-forder</span><br></pre></td></tr></table></figure>
<p>確定 <code>package.json</code> 檔中有包含 <code>&quot;laravel-elixir&quot;: &quot;^3.0.0&quot;,</code> ，接下來開始安裝套件</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm <span class="keyword">install</span></span><br></pre></td></tr></table></figure>
<p>試試寫在 <code>gulpfile.js</code> 中的預設值能不能正常運作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Laravel 5.1 gulpfile.js 的預設值</span></span><br><span class="line"><span class="keyword">var</span> elixir = <span class="built_in">require</span>(<span class="string">'laravel-elixir'</span>);</span><br><span class="line"></span><br><span class="line">elixir(<span class="function"><span class="keyword">function</span>(<span class="params">mix</span>) </span>&#123;</span><br><span class="line">    mix.sass(<span class="string">'app.scss'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>執行 <code>gulp</code> 的設定，右上有跑出通知代表成功！</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp</span><br></pre></td></tr></table></figure>
<h2 id="使用_laravel-elixir_在存檔時自動觸發_phpUnit">使用 laravel-elixir 在存檔時自動觸發 phpUnit</h2><p>打開 <code>gulpfile.js</code>，將底下的 function 改寫為</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">elixir<span class="list">(<span class="keyword">function</span><span class="list">(<span class="keyword">mix</span>)</span> &#123;</span><br><span class="line">	mix.phpUnit<span class="list">()</span><span class="comment">;</span></span><br><span class="line">&#125;)</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>
<p>存檔後在命令列上打 <code>gulp watch</code> ，接下來試著去修改 php 或是 <code>tests</code> 中的檔案，開始自動化測試吧。</p>
<h2 id="參考連結">參考連結</h2><p><a href="https://github.com/laravel/elixir" target="_blank" rel="external">Laravel Elixir (GitHub)</a></p>
<p><a href="https://laracasts.com/series/whats-new-in-laravel-5/episodes/10" target="_blank" rel="external">Laracast: Laravel Elxir</a></p>
<p><a href="https://laracasts.com/lessons/how-to-trigger-tests-on-save" target="_blank" rel="external">Laracast: Trigger test on save</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>每次修改程式都要自己跑測試實在有點麻煩，所以把監聽檔案改變並且執行測試這件事交給 Gulp 吧。</p>]]>
    
    </summary>
    
      <category term="Gulp" scheme="http://yuhui.im/tags/gulp/"/>
    
      <category term="Laravel 5.1" scheme="http://yuhui.im/tags/laravel-5-1/"/>
    
      <category term="Unit Test" scheme="http://yuhui.im/tags/unit-test/"/>
    
      <category term="PHP" scheme="http://yuhui.im/categories/php/"/>
    
      <category term="Laravel" scheme="http://yuhui.im/categories/php/laravel/"/>
    
  </entry>
  
</feed>
